<p-menubar [model]="items" class="pt-0 menubar">
  <ng-template pTemplate="start">
    <img src="../../assets/logo.svg" height="40" class="mr-2" />
  </ng-template>
  <ng-template pTemplate="item" let-item>
    <ng-container *ngIf="item.routerLink">
      <a [routerLink]="item.routerLink" class="p-menuitem-link">
        <span [class]="item.icon"></span>
        <span class="ml-2">{{ item.label }}</span>
      </a>
    </ng-container>
  </ng-template>
  <ng-template pTemplate="end">
    <div *ngIf="user; else signIn" class="card flex justify-content-center">
      <p-avatar (click)="menu.toggle($event)" shape="circle" size="large">
        <img
          [src]="user.profilePictureWebUrl"
          (error)="onCoverImageError(user)"
          style="width: 50%;"
        />
      </p-avatar>
      <p-menu #menu [model]="profileItems" [popup]="true">
        <ng-template pTemplate="item" let-item>
          <ul>
            <li>
              <a [routerLink]="item.route" class="p-menuitem-link">
                <span *ngIf="item.label === 'Your Profile'">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <circle
                      cx="12"
                      cy="6"
                      r="4"
                      stroke="#990001"
                      stroke-width="1.5"
                    />
                    <ellipse
                      cx="12"
                      cy="17"
                      rx="7"
                      ry="4"
                      stroke="#990001"
                      stroke-width="1.5"
                    />
                  </svg>
                </span>
                  <!-- <svg *ngIf="item.label === 'Your Profile'"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <circle
                      cx="12"
                      cy="6"
                      r="4"
                      stroke="#990001"
                      stroke-width="1.5"
                    />
                    <ellipse
                      cx="12"
                      cy="17"
                      rx="7"
                      ry="4"
                      stroke="#990001"
                      stroke-width="1.5"
                    />
                  </svg> -->
                <span [class]="item.icon"></span>
                <span class="ml-2">{{ item.label }}</span>
              </a>
              <a routerLink="/settings/profile">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <circle
                    cx="12"
                    cy="6"
                    r="4"
                    stroke="#990001"
                    stroke-width="1.5"
                  />
                  <ellipse
                    cx="12"
                    cy="17"
                    rx="7"
                    ry="4"
                    stroke="#990001"
                    stroke-width="1.5"
                  />
                </svg>
                <span>Profile</span>
              </a>
            </li>
            <li routerLinkActive="active">
              <a routerLink="/settings/addresses">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    d="M12 14.1695C9.87 14.1695 8.13 12.4395 8.13 10.2995C8.13 8.15945 9.87 6.43945 12 6.43945C14.13 6.43945 15.87 8.16945 15.87 10.3095C15.87 12.4495 14.13 14.1695 12 14.1695ZM12 7.93945C10.7 7.93945 9.63 8.99945 9.63 10.3095C9.63 11.6195 10.69 12.6795 12 12.6795C13.31 12.6795 14.37 11.6195 14.37 10.3095C14.37 8.99945 13.3 7.93945 12 7.93945Z"
                    fill="#990001"
                  />
                  <path
                    d="M12.0001 22.76C10.5201 22.76 9.03005 22.2 7.87005 21.09C4.92005 18.25 1.66005 13.72 2.89005 8.33C4.00005 3.44 8.27005 1.25 12.0001 1.25C12.0001 1.25 12.0001 1.25 12.0101 1.25C15.7401 1.25 20.0101 3.44 21.1201 8.34C22.3401 13.73 19.0801 18.25 16.1301 21.09C14.9701 22.2 13.4801 22.76 12.0001 22.76ZM12.0001 2.75C9.09005 2.75 5.35005 4.3 4.36005 8.66C3.28005 13.37 6.24005 17.43 8.92005 20C10.6501 21.67 13.3601 21.67 15.0901 20C17.7601 17.43 20.7201 13.37 19.6601 8.66C18.6601 4.3 14.9101 2.75 12.0001 2.75Z"
                    fill="#990001"
                  />
                </svg>
                Addresses</a
              >
            </li>
            <li routerLinkActive="active">
              <a routerLink="/settings/payment">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    d="M22 9.25H2C1.59 9.25 1.25 8.91 1.25 8.5C1.25 8.09 1.59 7.75 2 7.75H22C22.41 7.75 22.75 8.09 22.75 8.5C22.75 8.91 22.41 9.25 22 9.25Z"
                    fill="#990001"
                  />
                  <path
                    d="M8 17.25H6C5.59 17.25 5.25 16.91 5.25 16.5C5.25 16.09 5.59 15.75 6 15.75H8C8.41 15.75 8.75 16.09 8.75 16.5C8.75 16.91 8.41 17.25 8 17.25Z"
                    fill="#990001"
                  />
                  <path
                    d="M14.5 17.25H10.5C10.09 17.25 9.75 16.91 9.75 16.5C9.75 16.09 10.09 15.75 10.5 15.75H14.5C14.91 15.75 15.25 16.09 15.25 16.5C15.25 16.91 14.91 17.25 14.5 17.25Z"
                    fill="#990001"
                  />
                  <path
                    d="M17.56 21.25H6.44C2.46 21.25 1.25 20.05 1.25 16.11V7.89C1.25 3.95 2.46 2.75 6.44 2.75H17.55C21.53 2.75 22.74 3.95 22.74 7.89V16.1C22.75 20.05 21.54 21.25 17.56 21.25ZM6.44 4.25C3.3 4.25 2.75 4.79 2.75 7.89V16.1C2.75 19.2 3.3 19.74 6.44 19.74H17.55C20.69 19.74 21.24 19.2 21.24 16.1V7.89C21.24 4.79 20.69 4.25 17.55 4.25H6.44Z"
                    fill="#990001"
                  />
                </svg>
                Your payment methods</a
              >
            </li>
            <hr class="seperator" />
          </ul>
          <h5>Others</h5>
          <ul>
            <li routerLinkActive="active">
              <a routerLink="/settings/reviews">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    d="M7.49994 15.2495C7.30994 15.2495 7.11994 15.1795 6.96994 15.0295C6.67994 14.7395 6.67994 14.2595 6.96994 13.9695L10.1699 10.7695C10.3299 10.6095 10.5399 10.5295 10.7699 10.5495C10.9899 10.5695 11.1899 10.6895 11.3199 10.8795L12.4099 12.5195L15.9599 8.96945C16.2499 8.67945 16.7299 8.67945 17.0199 8.96945C17.3099 9.25945 17.3099 9.73945 17.0199 10.0295L12.8199 14.2295C12.6599 14.3895 12.4499 14.4695 12.2199 14.4495C11.9999 14.4295 11.7999 14.3095 11.6699 14.1195L10.5799 12.4795L8.02994 15.0295C7.87994 15.1795 7.68994 15.2495 7.49994 15.2495Z"
                    fill="#990001"
                  />
                  <path
                    d="M16.5 12.25C16.09 12.25 15.75 11.91 15.75 11.5V10.25H14.5C14.09 10.25 13.75 9.91 13.75 9.5C13.75 9.09 14.09 8.75 14.5 8.75H16.5C16.91 8.75 17.25 9.09 17.25 9.5V11.5C17.25 11.91 16.91 12.25 16.5 12.25Z"
                    fill="#990001"
                  />
                  <path
                    d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z"
                    fill="#990001"
                  />
                </svg>
                <span>Your reviews</span>
              </a>
            </li>
            <li routerLinkActive="active">
              <a routerLink="/settings/fav-places">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    d="M12 21.6496C11.69 21.6496 11.39 21.6096 11.14 21.5196C7.32 20.2096 1.25 15.5596 1.25 8.68961C1.25 5.18961 4.08 2.34961 7.56 2.34961C9.25 2.34961 10.83 3.00961 12 4.18961C13.17 3.00961 14.75 2.34961 16.44 2.34961C19.92 2.34961 22.75 5.19961 22.75 8.68961C22.75 15.5696 16.68 20.2096 12.86 21.5196C12.61 21.6096 12.31 21.6496 12 21.6496ZM7.56 3.84961C4.91 3.84961 2.75 6.01961 2.75 8.68961C2.75 15.5196 9.32 19.3196 11.63 20.1096C11.81 20.1696 12.2 20.1696 12.38 20.1096C14.68 19.3196 21.26 15.5296 21.26 8.68961C21.26 6.01961 19.1 3.84961 16.45 3.84961C14.93 3.84961 13.52 4.55961 12.61 5.78961C12.33 6.16961 11.69 6.16961 11.41 5.78961C10.48 4.54961 9.08 3.84961 7.56 3.84961Z"
                    fill="#990001"
                  />
                </svg>
                Your favorite places</a
              >
            </li>
            <li routerLinkActive="active">
              <a routerLink="/settings/buy-again">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M18.364 3.05664C18.7782 3.05664 19.114 3.39243 19.114 3.80664V8.04928C19.114 8.46349 18.7782 8.79928 18.364 8.79928H14.1213C13.7071 8.79928 13.3713 8.46349 13.3713 8.04928C13.3713 7.63507 13.7071 7.29928 14.1213 7.29928H16.4817C13.6363 5.0562 9.4987 5.24728 6.87348 7.8725C4.04217 10.7038 4.04217 15.2943 6.87348 18.1256C9.70478 20.9569 14.2952 20.9569 17.1265 18.1256C19.0234 16.2287 19.6504 13.5418 19.0039 11.1209C18.897 10.7207 19.1348 10.3097 19.535 10.2028C19.9352 10.0959 20.3462 10.3337 20.4531 10.7339C21.2321 13.6508 20.478 16.8954 18.1872 19.1862C14.7701 22.6033 9.2299 22.6033 5.81282 19.1862C2.39573 15.7691 2.39573 10.2289 5.81282 6.81184C9.04483 3.57983 14.1762 3.40478 17.614 6.2867V3.80664C17.614 3.39243 17.9497 3.05664 18.364 3.05664Z"
                    fill="#990001"
                  />
                </svg>
                Buy it again</a
              >
            </li>
            <hr class="seperator" />
          </ul>
          <ul style="margin-top: -15px">
            <li>
              <a routerLink="/settings/logout">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    d="M15.24 22.2705H15.11C10.67 22.2705 8.53002 20.5205 8.16002 16.6005C8.12002 16.1905 8.42002 15.8205 8.84002 15.7805C9.24002 15.7405 9.62002 16.0505 9.66002 16.4605C9.95002 19.6005 11.43 20.7705 15.12 20.7705H15.25C19.32 20.7705 20.76 19.3305 20.76 15.2605V8.74047C20.76 4.67047 19.32 3.23047 15.25 3.23047H15.12C11.41 3.23047 9.93002 4.42047 9.66002 7.62047C9.61002 8.03047 9.26002 8.34047 8.84002 8.30047C8.42002 8.27047 8.12001 7.90047 8.15001 7.49047C8.49001 3.51047 10.64 1.73047 15.11 1.73047H15.24C20.15 1.73047 22.25 3.83047 22.25 8.74047V15.2605C22.25 20.1705 20.15 22.2705 15.24 22.2705Z"
                    fill="#990001"
                  />
                  <path
                    d="M15 12.75H3.62C3.21 12.75 2.87 12.41 2.87 12C2.87 11.59 3.21 11.25 3.62 11.25H15C15.41 11.25 15.75 11.59 15.75 12C15.75 12.41 15.41 12.75 15 12.75Z"
                    fill="#990001"
                  />
                  <path
                    d="M5.84994 16.0998C5.65994 16.0998 5.46994 16.0298 5.31994 15.8798L1.96994 12.5298C1.67994 12.2398 1.67994 11.7598 1.96994 11.4698L5.31994 8.11984C5.60994 7.82984 6.08994 7.82984 6.37994 8.11984C6.66994 8.40984 6.66994 8.88984 6.37994 9.17984L3.55994 11.9998L6.37994 14.8198C6.66994 15.1098 6.66994 15.5898 6.37994 15.8798C6.23994 16.0298 6.03994 16.0998 5.84994 16.0998Z"
                    fill="#990001"
                  />
                </svg>
                <span>Log out</span>
              </a>
            </li>
            <hr class="seperator" />
          </ul>
          <ul>
            <li class="extraLinks">
              <a routerLink="!#">About zabihah</a>
              <a routerLink="!#">Privacy policy</a>
              <a routerLink="!#">Frequently asked questions</a>
            </li>
          </ul>
        </ng-template>
      </p-menu>
    </div>

    <ng-template #signIn>
      <p-button
        label="Log in"
        styleClass="p-button-link"
        (click)="showSignInDialog()"
      ></p-button>
      <button
        (click)="signInDialog = true"
        pButton
        pRipple
        label="Sign up"
        class="p-button-success"
      ></button>
    </ng-template>
  </ng-template>
</p-menubar>

<p-dialog
  [(visible)]="signInDialog"
  [style]="{ width: '532px' }"
  [draggable]="false"
  [modal]="true"
  [resizable]="false"
>
  <app-login
    *ngIf="signInDialog"
    (sendSignInOption)="setSignInOption($event)"
    (triggerOpenSignUp)="signInDialog = false; signUpDialog = true"
  />
</p-dialog>

<p-dialog
  [(visible)]="getOtpDialog"
  [style]="{ width: '532px' }"
  [draggable]="false"
  [modal]="true"
  [resizable]="false"
  (onClose)="signInDialog = true; signInOption = ''"
>
  <app-request-otp
    [signInOption]="signInOption"
    (sendTokenConfirmationReq)="getTokenConfirmationReq($event)"
  />
</p-dialog>

<p-dialog
  [(visible)]="verifyOtpDialog"
  [style]="{ width: '532px' }"
  [draggable]="false"
  [modal]="true"
  [resizable]="false"
  (onClose)="getOtpDialog = true; signInOption = ''"
>
  <app-verify-otp
    *ngIf="verifyOtpDialog"
    [otpRequest]="otpRequest"
    (sendUserData)="getUserData($event)"
    (triggerResendOtp)="getResendOtpEvent($event)"
  />
</p-dialog>

<p-dialog
  [(visible)]="signUpDialog"
  [style]="{ width: '532px' }"
  [draggable]="false"
  [modal]="true"
  [resizable]="false"
>
  <app-signup
    [userData]="user"
    (triggerRequestOptEvent)="getRequestOptEvent($event)"
    (triggerCloseSignUp)="signUpDialog = false"
  />
</p-dialog>
